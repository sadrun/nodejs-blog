(function(t){var e={page:".page",start:0,duration:500,loop:false,drag:false,dir:"v",der:.1,change:function(t){},beforeChange:function(t){},afterChange:function(t){},orientationchange:function(t){}};function n(t){var e=document.createElement("style");e.innerHTML='.turnpage-wp{-webkit-transform: translate3d(0,0,0);transform: translate3d(0,0,0);}.turnpage-wp:after { display: block;content:"";height: 0;clear: both;}.turnpage-wp.anim{-webkit-transition: all '+t+"ms ease-out 0s;transition: all "+t+"ms ease-out 0s; }.turnpage-page{display: block;overflow: hidden;}.turnpage-dir-h {float: left;}";document.getElementsByTagName("head")[0].appendChild(e)}function a(t){t.preventDefault()}function r(t,e,n){if(t<0){return!!n?e-1:0}if(t>=e){return!!n?0:e-1}return t}function i(t,e,n){var a="0px",r="0px";if(e==="v")r=n+"px";else a=n+"px";t.style.cssText+=";-webkit-transform : translate3d("+a+", "+r+", 0px);"+"transform : translate3d("+a+", "+r+", 0px);"}function o(t){var a=t?t:{};for(var r in e){if(!a.hasOwnProperty(r)){a[r]=e[r]}}n(a.duration);var i=this;i.curIndex=-1;i.o=a;i.startY=0;i.movingFlag=false;i.ele.classList.add("turnpage-wp");i.parentEle=i.ele.parentNode;var o=a.page;if(o.indexOf(".")==0){o=o.substring(1,o.length)}i.pageEles=i.ele.getElementsByClassName(o);for(var s=0;s<i.pageEles.length;s++){var u=i.pageEles[s];u.classList.add("turnpage-page");u.classList.add("turnpage-dir-"+a.dir)}i.pagesLength=i.pageEles.length;i.update();i.initEvent();i.status=1}function s(t,e){this.ele=t;o.call(this,e)}s.prototype.update=function(){if(this.o.dir==="h"){this.width=this.parentEle.offsetWidth;for(var t=0;t<this.pageEles.length;t++){var e=this.pageEles[t];e.style.width=this.width+"px"}this.ele.style.width=this.width*this.pagesLength+"px"}this.height=this.parentEle.offsetHeight;for(var t=0;t<this.pageEles.length;t++){var e=this.pageEles[t];e.style.height=this.height+"px"}this.moveTo(this.curIndex<0?this.o.start:this.curIndex)};s.prototype.initEvent=function(){var e=this;var n=e.ele;n.addEventListener("touchstart",function(t){if(!e.status){return 1}e.start();if(e.movingFlag){return 0}e.startX=t.targetTouches[0].pageX;e.startY=t.targetTouches[0].pageY});n.addEventListener("touchend",function(t){if(!e.status){return 1}e.stop();if(e.movingFlag){return 0}var n=e.o.dir==="v"?(t.changedTouches[0].pageY-e.startY)/e.height:(t.changedTouches[0].pageX-e.startX)/e.width;var a=n>e.o.der||n<-e.o.der?n>0?-1:1:0;e.moveTo(e.curIndex+a,true)});if(e.o.drag){n.addEventListener("touchmove",function(t){if(!e.status){return 1}if(e.movingFlag){e.startX=t.targetTouches[0].pageX;e.startY=t.targetTouches[0].pageY;return 0}var a=t.changedTouches[0].pageY-e.startY;if(e.curIndex==0&&a>0||e.curIndex===e.pagesLength-1&&a<0)a/=2;var r=t.changedTouches[0].pageX-e.startX;if(e.curIndex==0&&r>0||e.curIndex===e.pagesLength-1&&r<0)r/=2;var o=e.o.dir==="v"?-e.curIndex*e.height+a:-e.curIndex*e.width+r;n.classList.remove("anim");i(n,e.o.dir,o)})}t.addEventListener("orientationchange",function(){if(t.orientation===180||t.orientation===0){e.o.orientationchange("portrait")}if(t.orientation===90||t.orientation===-90){e.o.orientationchange("landscape")}},false);t.addEventListener("resize",function(){e.update()},false)};s.prototype.holdTouch=function(){document.addEventListener("touchmove",a)};s.prototype.unholdTouch=function(){document.removeEventListener("touchmove",a)};s.prototype.start=function(){this.status=1;this.holdTouch()};s.prototype.stop=function(){this.unholdTouch()};s.prototype.getCurIndex=function(){return this.curIndex};s.prototype.moveTo=function(e,n){var a=this;var o=a.ele;var s=a.curIndex;e=r(e,a.pagesLength,a.o.loop);if(n){o.classList.add("anim")}else{o.classList.remove("anim")}if(e!==s){var u=a.o.beforeChange({next:e,cur:s});if(u===false){return 1}}a.movingFlag=true;a.curIndex=e;i(o,a.o.dir,-e*(a.o.dir==="v"?a.height:a.width));if(e!==s){a.o.change({prev:s,cur:e})}t.setTimeout(function(){a.movingFlag=false;if(e!==s){a.o.afterChange({prev:s,cur:e});for(var t=0;t<a.pageEles.length;t++){var n=a.pageEles[t];if(t===e){n.classList.add("cur")}else{n.classList.remove("cur")}}}},a.o.duration)};s.prototype.movePrev=function(t){this.moveTo(this.curIndex-1,t)};s.prototype.moveNext=function(t){this.moveTo(this.curIndex+1,t)};Element.prototype.turnpage=function(t){return new s(this,t)}})(window);